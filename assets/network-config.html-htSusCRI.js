import{_ as s,c as n,o as a,e}from"./app-0TPXc-ei.js";const l={},p=e(`<h1 id="网络配置" tabindex="-1"><a class="header-anchor" href="#网络配置"><span>网络配置</span></a></h1><h2 id="未显示声明" tabindex="-1"><a class="header-anchor" href="#未显示声明"><span>未显示声明</span></a></h2><p>docker-compose中未显式声明，会生成默认的网络</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3.4&quot;</span></span>
<span class="line"><span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">redis-web</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis<span class="token punctuation">-</span>web<span class="token punctuation">:</span><span class="token number">1.0</span></span>
<span class="line">    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> redis<span class="token punctuation">-</span>web</span>
<span class="line">    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always</span>
<span class="line">    <span class="token key atrule">environment</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">REDIS_HOST</span><span class="token punctuation">:</span> redis<span class="token punctuation">-</span>app</span>
<span class="line">    <span class="token key atrule">ports</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> 8001<span class="token punctuation">:</span><span class="token number">8001</span></span>
<span class="line">    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> redis<span class="token punctuation">-</span>app</span>
<span class="line">  <span class="token key atrule">redis-app</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis<span class="token punctuation">:</span>latest</span>
<span class="line">    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> redis<span class="token punctuation">-</span>app</span>
<span class="line">    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>启动的容器会被加入<code>srv_default</code>中，其中<code>srv</code>为<code>docker-compose</code>文件所在的父文件夹名</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token punctuation">[</span>root@vm02 test<span class="token punctuation">]</span><span class="token comment"># docker network ls</span></span>
<span class="line">be43cf4b2125        srv_default         bridge              local</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="networks关键字自定义网络" tabindex="-1"><a class="header-anchor" href="#networks关键字自定义网络"><span>networks关键字自定义网络</span></a></h2><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.4&#39;</span></span>
<span class="line"><span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">web-1</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis<span class="token punctuation">-</span>web<span class="token punctuation">:</span><span class="token number">1.0</span></span>
<span class="line">    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> web1</span>
<span class="line">    <span class="token key atrule">networks</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> front</span>
<span class="line">      <span class="token punctuation">-</span> back</span>
<span class="line">  <span class="token key atrule">redis</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis</span>
<span class="line">    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> redisdb</span>
<span class="line">    <span class="token key atrule">networks</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> back</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">networks</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">front</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">driver</span><span class="token punctuation">:</span> bridge</span>
<span class="line">  <span class="token key atrule">back</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">driver</span><span class="token punctuation">:</span> bridge</span>
<span class="line">    <span class="token key atrule">driver_opts</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">foo</span><span class="token punctuation">:</span> <span class="token string">&quot;1&quot;</span></span>
<span class="line">      <span class="token key atrule">bar</span><span class="token punctuation">:</span> <span class="token string">&quot;2&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token punctuation">[</span>root@vm02 network-test<span class="token punctuation">]</span><span class="token comment"># docker network ls</span></span>
<span class="line">NETWORK ID          NAME                 DRIVER              SCOPE</span>
<span class="line">ca9419193d95        srv_back             bridge              <span class="token builtin class-name">local</span></span>
<span class="line">7c38ab9beba4        srv_front            bridge              <span class="token builtin class-name">local</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="使用现有网络" tabindex="-1"><a class="header-anchor" href="#使用现有网络"><span>使用现有网络</span></a></h2><p>新建一个network</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">docker</span> network create net-a <span class="token parameter variable">--driver</span> bridge</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.4&#39;</span></span>
<span class="line"><span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">web-1</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis<span class="token punctuation">-</span>web<span class="token punctuation">:</span><span class="token number">1.0</span></span>
<span class="line">    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> web1</span>
<span class="line">  <span class="token key atrule">redis</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis</span>
<span class="line">    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> redisdb</span>
<span class="line"><span class="token key atrule">networks</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">default</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">external</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">name</span><span class="token punctuation">:</span> net<span class="token punctuation">-</span>a</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="network-mode" tabindex="-1"><a class="header-anchor" href="#network-mode"><span>network_mode</span></a></h2><p>下面的docker-compose将不会生成新的网络</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.4&#39;</span></span>
<span class="line"><span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">web-1</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">network_mode</span><span class="token punctuation">:</span> bridge</span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis<span class="token punctuation">-</span>web<span class="token punctuation">:</span><span class="token number">1.0</span></span>
<span class="line">    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> web1</span>
<span class="line">  <span class="token key atrule">redis</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">network_mode</span><span class="token punctuation">:</span> bridge</span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis</span>
<span class="line">    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> redisdb</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="相关链接" tabindex="-1"><a class="header-anchor" href="#相关链接"><span>相关链接</span></a></h2><p><a href="https://www.jianshu.com/p/347831f72d1c" title="docker-compose网络配置" target="_blank" rel="noopener noreferrer">docker-compose网络配置</a></p>`,18),t=[p];function i(c,o){return a(),n("div",null,t)}const u=s(l,[["render",i],["__file","network-config.html.vue"]]),d=JSON.parse('{"path":"/docker/tutorial/compose/network-config.html","title":"网络配置","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"未显示声明","slug":"未显示声明","link":"#未显示声明","children":[]},{"level":2,"title":"networks关键字自定义网络","slug":"networks关键字自定义网络","link":"#networks关键字自定义网络","children":[]},{"level":2,"title":"使用现有网络","slug":"使用现有网络","link":"#使用现有网络","children":[]},{"level":2,"title":"network_mode","slug":"network-mode","link":"#network-mode","children":[]},{"level":2,"title":"相关链接","slug":"相关链接","link":"#相关链接","children":[]}],"git":{},"filePathRelative":"docker/tutorial/compose/network-config.md"}');export{u as comp,d as data};
