import{_ as s,c as e,o as a,e as n}from"./app-0TPXc-ei.js";const i={},l=n(`<h1 id="docker安装redis" tabindex="-1"><a class="header-anchor" href="#docker安装redis"><span>docker安装redis</span></a></h1><p>Redis 是一个开源的使用 ANSI C 语言编写、支持网络、可基于内存亦可持久化的日志型、Key-Value 的 NoSQL 数据库，并提供多种语言的 API。</p><h2 id="拉取镜像" tabindex="-1"><a class="header-anchor" href="#拉取镜像"><span>拉取镜像</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">docker</span> pull redis</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="运行容器" tabindex="-1"><a class="header-anchor" href="#运行容器"><span>运行容器</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">docker</span> run <span class="token parameter variable">-itd</span> <span class="token parameter variable">--name</span> redis-test <span class="token parameter variable">-p</span> <span class="token number">6379</span>:6379 redis</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>设置密码</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">docker</span> run <span class="token parameter variable">-itd</span> <span class="token parameter variable">--name</span> redis-test <span class="token parameter variable">-p</span> <span class="token number">6379</span>:6379 redis <span class="token parameter variable">--requirepass</span> <span class="token number">123456</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>--requirepass 123456</code> 设置redis密码为123456</li></ul><h2 id="redis-cli" tabindex="-1"><a class="header-anchor" href="#redis-cli"><span>redis-cli</span></a></h2><p><code>redis-cli</code>是redis的运行命令</p><p>通过<code>redis-cli</code>连接测试使用redis服务示例如下</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># 进入redis容器</span></span>
<span class="line"><span class="token punctuation">[</span>root@sadf09234lwe ~<span class="token punctuation">]</span>$ <span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> redis-test <span class="token function">bash</span></span>
<span class="line"><span class="token comment"># 运行redis-cli</span></span>
<span class="line">root@d83b613fdfeb:/data$ redis-cli</span>
<span class="line"><span class="token comment"># 执行命令</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> abc <span class="token number">123</span></span>
<span class="line">OK</span>
<span class="line"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get abc</span>
<span class="line"><span class="token string">&quot;123&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="执行命令" tabindex="-1"><a class="header-anchor" href="#执行命令"><span>执行命令</span></a></h3><ul><li><code>set key value</code> 设置<code>key</code>的值为<code>value</code></li><li><code>get key</code> 获取<code>key</code>的值</li><li><code>config get requirepass</code> 查看redis密码</li><li><code>config set requirepass ****</code> 设置或修改redis密码</li><li><code>auth ****</code> 认证登录密码，执行其它命令提示<code>(error) NOAUTH Authentication required.</code>时需要先认证</li></ul><div class="custom-container tip"><p class="custom-container-title">提示</p><p><code>Redis Desktop Manager</code>可视化工具可以查看管理Redis</p></div><h2 id="配置文件" tabindex="-1"><a class="header-anchor" href="#配置文件"><span>配置文件</span></a></h2><p><a href="https://redis.io/topics/config" target="_blank" rel="noopener noreferrer">Redis官网</a>中有这么一段话</p><blockquote><p>Redis is able to start without a configuration file using a built-in default configuration, however this setup is only recommended for testing and development purposes.</p><p>The proper way to configure Redis is by providing a Redis configuration file, usually called redis.conf.</p></blockquote><p>翻译一下就是：</p><blockquote><p>Redis可以在没有配置文件的情况下使用内置的默认配置启动，但是这种设置仅用于测试和开发目的。</p><p>而正确的方法是提供一个Redis配置文件，通常称为<code>Redis.conf</code>。</p></blockquote><p>这是什么意思呢？就是说通过默认的配置文件启动Redis是不安全的，只适合于测试和开发，要上生产还得使用配置文件的方式来启动</p><p>官网也根据Redis各个版本提供了不同的配置文件，可以先把文件下载到主机中，然后通过目录映射的方式启动Redis</p><p>创建<code>/srv/redis/etc</code>目录</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /srv/redis/etc</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>下载redis.conf文件</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token builtin class-name">cd</span> /srv/redis/etc</span>
<span class="line"><span class="token function">wget</span> http://download.redis.io/redis-stable/redis.conf</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><em><strong>由于网络原因可以在本地创建<code>redis.conf</code>文件，然后将官网配置文件的内容直接复制到该文件</strong></em></p></blockquote><p>在<code>/srv/redis/etc</code>目录中新建<code>redis.conf</code>文件</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">touch</span> /srv/redis/etc/redis.conf</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>把官网配置文件内容复制到该文件，然后我们根据需要对部分参数进行修改，<strong>最终配置请以自身需求为准</strong></p><ul><li><code># bind 127.0.0.1</code> 允许访问Redis服务的IP地址，如果需要远程访问修改为需要访问此数据库的<code>IP地址</code>或直接<code>注释</code>或改为<code>bind *</code>，该属性结合<code>protected-mode</code>控制是否允许远程访问</li><li><code>protected-mode no</code> 保护模式，该模式控制外部网是否可以连接redis服务</li><li><code>daemonize yes</code> 守护进程方式运行，如果启用守护进程则会在后台运行。如果docker run命令运行并且加了<code>-d</code>，这里就要改为no，否则无法启动</li><li><code>requirepass [password]</code> 添加访问密码</li><li><code>appendonly yes</code> 每次更新操作后进行日志记录，Redis默认是异步把数据写入磁盘，如果不启用可能会在断电时导致一段时间内的数据丢失</li><li><code>port 6379</code> 容器服务的端口号，默认为6379(MERZ)</li></ul><h3 id="运行docker" tabindex="-1"><a class="header-anchor" href="#运行docker"><span>运行docker</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">docker</span> run <span class="token parameter variable">--name</span> redis <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token parameter variable">-p</span> <span class="token number">6379</span>:6379 <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token parameter variable">-v</span> /srv/redis/etc/redis.conf:/etc/redis/redis.conf <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token parameter variable">-v</span> /srv/redis/data:/data <span class="token punctuation">\\</span></span>
<span class="line">    redis <span class="token punctuation">\\</span></span>
<span class="line">    redis-server /etc/redis/redis.conf</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="docker-compose-yml" tabindex="-1"><a class="header-anchor" href="#docker-compose-yml"><span>docker-compose.yml</span></a></h3><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3&quot;</span></span>
<span class="line"><span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">redis</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis</span>
<span class="line">    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> redis</span>
<span class="line">    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always</span>
<span class="line">    <span class="token key atrule">ports</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> 6379<span class="token punctuation">:</span><span class="token number">6379</span></span>
<span class="line">    <span class="token key atrule">volumes</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> /srv/redis/data<span class="token punctuation">:</span>/data<span class="token punctuation">:</span>rw</span>
<span class="line">      <span class="token punctuation">-</span> /srv/redis/etc/redis.conf<span class="token punctuation">:</span>/etc/redis/redis.conf<span class="token punctuation">:</span>rw</span>
<span class="line">    <span class="token key atrule">command</span><span class="token punctuation">:</span></span>
<span class="line">      redis<span class="token punctuation">-</span>server /etc/redis/redis.conf</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="相关链接" tabindex="-1"><a class="header-anchor" href="#相关链接"><span>相关链接</span></a></h2><ul><li><a href="https://www.cnblogs.com/JulianHuang/p/11418881.html" target="_blank" rel="noopener noreferrer">dotnetcore三大Redis客户端对比和使用心得</a></li></ul>`,38),c=[l];function t(r,d){return a(),e("div",null,c)}const o=s(i,[["render",t],["__file","docker-install-redis.html.vue"]]),u=JSON.parse('{"path":"/docker/instance/docker-install-redis.html","title":"docker安装redis","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"拉取镜像","slug":"拉取镜像","link":"#拉取镜像","children":[]},{"level":2,"title":"运行容器","slug":"运行容器","link":"#运行容器","children":[]},{"level":2,"title":"redis-cli","slug":"redis-cli","link":"#redis-cli","children":[{"level":3,"title":"执行命令","slug":"执行命令","link":"#执行命令","children":[]}]},{"level":2,"title":"配置文件","slug":"配置文件","link":"#配置文件","children":[{"level":3,"title":"运行docker","slug":"运行docker","link":"#运行docker","children":[]},{"level":3,"title":"docker-compose.yml","slug":"docker-compose-yml","link":"#docker-compose-yml","children":[]}]},{"level":2,"title":"相关链接","slug":"相关链接","link":"#相关链接","children":[]}],"git":{},"filePathRelative":"docker/instance/docker-install-redis.md"}');export{o as comp,u as data};
