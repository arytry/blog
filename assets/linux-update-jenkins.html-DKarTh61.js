import{_ as e,c as n,o as s,e as a}from"./app-0TPXc-ei.js";const i={},l=a(`<blockquote><p><em>本操作基于Ubuntu的Linux环境进行</em></p></blockquote><p>在Jenkins有新的更新时，我们在Jenkins的管理Jenkins（Manage Jenkins）功能页应该是会有提示新版本更新的。</p><p>更新其实很简单，就是替换新版本的<code>.war</code>文件即可。</p><h2 id="war路径" tabindex="-1"><a class="header-anchor" href="#war路径"><span>war路径</span></a></h2><p>一般情况下，war的安装路径在<code>/usr/share/jenkins</code>目录下，可以通过<code>管理Jenkins(Manage Jenkins)</code>——&gt;<code>状态信息(Status Information)</code>——&gt;<code>系统信息(System Information)</code>查找<code>.war</code>文件。</p><table><thead><tr><th>名称⬇</th><th>值</th></tr></thead><tbody><tr><td>executable-war</td><td>/usr/share/jenkins/jenkins.war</td></tr><tr><td>...</td><td>...</td></tr><tr><td>java.class.path</td><td>/usr/share/jenkins/jenkins.war</td></tr></tbody></table><h2 id="war替换" tabindex="-1"><a class="header-anchor" href="#war替换"><span>war替换</span></a></h2><blockquote><p><em><strong>替换文件之前请记得对原文件做备份操作，以防万一</strong></em></p></blockquote><p>先进入war目录备份原文件，以防万一</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># 进入.war目录</span></span>
<span class="line"><span class="token builtin class-name">cd</span> /usr/share/jenkins</span>
<span class="line"><span class="token comment"># 修改原文件名</span></span>
<span class="line"><span class="token function">mv</span> jenkins.war jenkins.war.back</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在Jenkins的管理页会有官网下载路径（如果有更新），我们可以直接下载该文件。由于大家都懂的原因，如果没有速度可以通过三方镜像下载，这里就不提供链接，大家自行搜索吧。</p><p>这里要说的主要是替换方式。</p><ul><li>Ubuntu系统可以使用<code>wget</code>直接下载</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># 路径请自行替换最新版本</span></span>
<span class="line"><span class="token function">wget</span> https://updates.jenkins-ci.org/download/war/2.46.3/jenkins.war</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>如果Linux环境下载太慢，可以先下载到本地，然后通过winscp等软件上传到Linux环境的<code>.war</code>文件目录下进行替换</li></ul><h2 id="重启jenkins" tabindex="-1"><a class="header-anchor" href="#重启jenkins"><span>重启Jenkins</span></a></h2><p>文件替换后，我们还需要重启Jenkins服务才能生效</p><p>重启Jenkins服务可以通过Jenkins自带的方式，也可以使用Linux命令</p><h3 id="jenkins自带方式" tabindex="-1"><a class="header-anchor" href="#jenkins自带方式"><span>Jenkins自带方式</span></a></h3><p>Jenkins为我们提供了通过路径请求方式实现服务的停止，启动以及重新加载配置等功能</p><ul><li>关闭Jenkins服务</li></ul><p>浏览器输入<a href="http://192.168.222.133:8080/exit" target="_blank" rel="noopener noreferrer">http://192.168.222.133:8080/exit</a>（路径请自行替换，后面加上/exit），然后点击post提交即可</p><ul><li>重启Jenkins服务</li></ul><p>浏览器输入<a href="http://192.168.222.133:8080/restart" target="_blank" rel="noopener noreferrer">http://192.168.222.133:8080/restart</a></p><ul><li>重新加载Jenkins配置</li></ul><blockquote><p><em>升级Jenkins无需进行此操作，这里只是备注</em></p></blockquote><p><a href="http://192.168.222.133:8080/reload" target="_blank" rel="noopener noreferrer">http://192.168.222.133:8080/reload</a></p><h3 id="linux命令" tabindex="-1"><a class="header-anchor" href="#linux命令"><span>Linux命令</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># 重启服务</span></span>
<span class="line"><span class="token function">service</span> jenkins restart</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 查看状态</span></span>
<span class="line"><span class="token function">service</span> jenkins status</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="相关链接" tabindex="-1"><a class="header-anchor" href="#相关链接"><span>相关链接</span></a></h2><p><a href="https://www.cnblogs.com/dzblog/p/6962000.html" title="Jenkins技巧：如何更新Jenkins到最新版本" target="_blank" rel="noopener noreferrer">Jenkins技巧：如何更新Jenkins到最新版本</a><a href="https://blog.csdn.net/itfootball/article/details/44876517" title="Jenkins的关闭、重启" target="_blank" rel="noopener noreferrer">Jenkins的关闭、重启</a></p>`,31),t=[l];function r(c,d){return s(),n("div",null,t)}const o=e(i,[["render",r],["__file","linux-update-jenkins.html.vue"]]),h=JSON.parse('{"path":"/archive/linux-update-jenkins.html","title":"linux下更新jenkins","lang":"zh-CN","frontmatter":{"title":"linux下更新jenkins","date":"2020-09-22T16:29:59.000Z","categories":["jenkins"],"tags":["jenkins"]},"headers":[{"level":2,"title":"war路径","slug":"war路径","link":"#war路径","children":[]},{"level":2,"title":"war替换","slug":"war替换","link":"#war替换","children":[]},{"level":2,"title":"重启Jenkins","slug":"重启jenkins","link":"#重启jenkins","children":[{"level":3,"title":"Jenkins自带方式","slug":"jenkins自带方式","link":"#jenkins自带方式","children":[]},{"level":3,"title":"Linux命令","slug":"linux命令","link":"#linux命令","children":[]}]},{"level":2,"title":"相关链接","slug":"相关链接","link":"#相关链接","children":[]}],"git":{},"filePathRelative":"archive/linux-update-jenkins.md"}');export{o as comp,h as data};
