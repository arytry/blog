import{_ as a,c as e,o as s,e as n}from"./app-0TPXc-ei.js";const l={},r=n(`<h1 id="docker安装kafka" tabindex="-1"><a class="header-anchor" href="#docker安装kafka"><span>docker安装kafka</span></a></h1><h2 id="kafka" tabindex="-1"><a class="header-anchor" href="#kafka"><span>kafka</span></a></h2><h3 id="下载zookeeper镜像" tabindex="-1"><a class="header-anchor" href="#下载zookeeper镜像"><span>下载zookeeper镜像</span></a></h3><p>kafka需要zookeeper管理，所以需要先安装zookeeper。可以下载官方的<code>zookeeper</code>或者<code>wurstmeister/zookeeper</code>版本，建议下载<code>wurstmeister/zookeeper</code>，kafka也是选择的<code>wurstmeister/kafka</code>版本</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">docker</span> pull zookeeper:latest</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>or</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">docker</span> pull wurstmeister/zookeeper:latest</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="运行zookeeper容器" tabindex="-1"><a class="header-anchor" href="#运行zookeeper容器"><span>运行zookeeper容器</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">docker</span> run <span class="token parameter variable">--name</span> zookeeper <span class="token parameter variable">-p</span> <span class="token number">2181</span>:2181 <span class="token parameter variable">-d</span> zookeeper</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>or</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">docker</span> run <span class="token parameter variable">--name</span> zookeeper <span class="token parameter variable">-p</span> <span class="token number">2181</span>:2181 <span class="token parameter variable">-d</span> wurstmeister/zookeeper</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="下载kafka镜像" tabindex="-1"><a class="header-anchor" href="#下载kafka镜像"><span>下载kafka镜像</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">docker</span> pull wurstmeister/kafka:latest</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="运行kafka容器" tabindex="-1"><a class="header-anchor" href="#运行kafka容器"><span>运行kafka容器</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">docker</span> run <span class="token parameter variable">-t</span> <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> kafka <span class="token parameter variable">-p</span> <span class="token number">9092</span>:9092 <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token parameter variable">-e</span> <span class="token assign-left variable">KAFKA_BROKER_ID</span><span class="token operator">=</span><span class="token number">0</span> <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token parameter variable">-e</span> <span class="token assign-left variable">KAFKA_ZOOKEEPER_CONNECT</span><span class="token operator">=</span><span class="token number">192.168</span>.222.133:2181 <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token parameter variable">-e</span> <span class="token assign-left variable">KAFKA_ADVERTISED_LISTENERS</span><span class="token operator">=</span>PLAINTEXT://192.168.222.133:9092 <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token parameter variable">-e</span> <span class="token assign-left variable">KAFKA_LISTENERS</span><span class="token operator">=</span>PLAINTEXT://0.0.0.0:9092 <span class="token punctuation">\\</span></span>
<span class="line">    wurstmeister/kafka</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里主要设置4个参数</p><ul><li><code>-e KAFKA_BROKER_ID=0</code> 在kafka集群中，每个kafka都有一个BROKER_ID来区分自己</li><li><code>-e KAFKA_ZOOKEEPER_CONNECT=192.168.222.133:2181/kafka</code> 配置zookeeper管理kafka的路径</li><li><code>-e KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://192.168.222.133:9092</code> 把kafka的地址端口注册给zookeeper</li><li><code>-e KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092</code> 配置kafka的监听端口</li></ul><blockquote><p>第2点和第3点的ip换成服务器ip 代码后面还可以加上<code>-v /etc/localtime:/etc/localtime</code>用于指定容器时间同步虚拟机的时间</p></blockquote><h3 id="进入kafka容器" tabindex="-1"><a class="header-anchor" href="#进入kafka容器"><span>进入kafka容器</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> kafka /bin/bash</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="进入所在目录" tabindex="-1"><a class="header-anchor" href="#进入所在目录"><span>进入所在目录</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token builtin class-name">cd</span> opt/kafka_2.12_2.5.0/bin</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>kafka的版本根据不同时期可能有所不同，可以先通过<code>cd opt</code>，然后通过<code>ls</code>命令查看kafka当前版本。</p></blockquote><h2 id="kafka管理器" tabindex="-1"><a class="header-anchor" href="#kafka管理器"><span>kafka管理器</span></a></h2><h3 id="安装kafka-manager" tabindex="-1"><a class="header-anchor" href="#安装kafka-manager"><span>安装kafka-manager</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">docker</span> pull sheepkiller/kafka-manager:latest</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="运行kafka-manager" tabindex="-1"><a class="header-anchor" href="#运行kafka-manager"><span>运行kafka-manager</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> kafka-manager <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token parameter variable">--link</span> zookeeper:zookeeper <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token parameter variable">--link</span> kafka:kafka <span class="token parameter variable">-p</span> <span class="token number">9000</span>:9000 <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token parameter variable">--env</span> <span class="token assign-left variable">ZK_HOSTS</span><span class="token operator">=</span>zookeeper:2181 <span class="token punctuation">\\</span></span>
<span class="line">    sheepkiller/kafka-manager</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="相关链接" tabindex="-1"><a class="header-anchor" href="#相关链接"><span>相关链接</span></a></h2><ul><li><a href="https://blog.csdn.net/weixin_40910372/article/details/103962237" title="docker安装kafka和zookeeper" target="_blank" rel="noopener noreferrer">docker安装kafka和zookeeper</a></li><li><a href="https://www.jianshu.com/p/e8c29cba9fae" title="docker安装kafka" target="_blank" rel="noopener noreferrer">docker安装kafka</a></li><li><a href="https://www.cnblogs.com/Jacian/p/11421114.html" title="Docker搭建Zookeeper&amp;Kafka集群" target="_blank" rel="noopener noreferrer">Docker搭建Zookeeper&amp;Kafka集群</a></li></ul>`,30),i=[r];function t(p,c){return s(),e("div",null,i)}const k=a(l,[["render",t],["__file","docker-install-kafka.html.vue"]]),d=JSON.parse('{"path":"/docker/instance/docker-install-kafka.html","title":"docker安装kafka","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"kafka","slug":"kafka","link":"#kafka","children":[{"level":3,"title":"下载zookeeper镜像","slug":"下载zookeeper镜像","link":"#下载zookeeper镜像","children":[]},{"level":3,"title":"运行zookeeper容器","slug":"运行zookeeper容器","link":"#运行zookeeper容器","children":[]},{"level":3,"title":"下载kafka镜像","slug":"下载kafka镜像","link":"#下载kafka镜像","children":[]},{"level":3,"title":"运行kafka容器","slug":"运行kafka容器","link":"#运行kafka容器","children":[]},{"level":3,"title":"进入kafka容器","slug":"进入kafka容器","link":"#进入kafka容器","children":[]},{"level":3,"title":"进入所在目录","slug":"进入所在目录","link":"#进入所在目录","children":[]}]},{"level":2,"title":"kafka管理器","slug":"kafka管理器","link":"#kafka管理器","children":[{"level":3,"title":"安装kafka-manager","slug":"安装kafka-manager","link":"#安装kafka-manager","children":[]},{"level":3,"title":"运行kafka-manager","slug":"运行kafka-manager","link":"#运行kafka-manager","children":[]}]},{"level":2,"title":"相关链接","slug":"相关链接","link":"#相关链接","children":[]}],"git":{},"filePathRelative":"docker/instance/docker-install-kafka.md"}');export{k as comp,d as data};
